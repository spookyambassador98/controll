doctype html
html
  head
    title Simple Server
    link(rel='stylesheet', href='/styles.css')
    script(src="https://code.jquery.com/jquery-3.6.0.min.js")
    script.
      $(document).ready(function() {
        // Fetch the current IP address and display it
        fetch('/get-ip')
          .then(response => response.json())
          .then(data => {
            document.getElementById('ipAddress').innerText = 'Server IP: ' + data.ip;
          })
          .catch(error => {
            console.error('Error fetching IP:', error);
          });

        // Add event listeners for ON and OFF buttons
        $('#onBtn').click(function() {
          sendData('ON');
        });

        $('#offBtn').click(function() {
          sendData('OFF');
        });

        // Function to send data to the server
        function sendData(data) {
          fetch('/control', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ action: data }),
          })
            .then(response => response.json())
            .then(data => {
              console.log('Success:', data);
            })
            .catch(error => {
              console.error('Error:', error);
            });
        }
      });
  body
    h1 Simple Server Control
    button#onBtn On
    button#offBtn Off
    p#ipAddress  // Display the IP address here
    script(src='/script.js')
